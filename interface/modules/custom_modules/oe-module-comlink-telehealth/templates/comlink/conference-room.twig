{# this template node is for the minimized view window #}
<div class="minimized-telehealth-video-template col-lg-2 col-md-3 col-sm-4 col-6 p-0 m-0 drag-action d-none">
    {% include 'comlink/video-control-bar.twig' %}
</div>

<div class="row conference-room bg-dark">
        <div class="col-12 d-flex">
            <!-- each additional remote participant will get added here using the participant-list-template-node as a clone -->
            <div id="participant-list-container"
                 class="participant-list-container col-lg-2 col-md-2 col-sm-3 col-4 p-0"
                 data-class-minimize="participant-list-container p-0 d-flex flex-row"
                 data-class-maximize="participant-list-container col-lg-2 col-md-2 col-sm-3 col-4 p-0"
            >
                {% include 'comlink/room-participant-container.html.twig' with {template: true} %}
                {% include 'comlink/local-participant-container.html.twig' with {callerName: callerName} %}
            </div>
            <div class="remote-video-container text-center flex-fill">
                <video id="presentation-screen" class="remote-video d-none w-100"></video>
                <div class="waiting-container">
                    <h1 class="h1-responsive text-light text-center">{{ "Waiting for participants to join"|xlt }}<div class="spinner-border" role="status">
                            <span class="sr-only">{{ "Waiting"|xlt }}...</span>
                        </div></h1>
                </div>
                {% include 'comlink/video-control-bar.twig' %}
            </div>
        </div>
</div>
<div class="modal fade" id="telehealth-container-hangup-confirm" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog mw-50 ml-auto mr-auto">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ "Confirm Session Close" | xlt }}</h5>
                <button type="button" class="close btn-telehealth-confirm-cancel" aria-label="{{ "Close" | xla }}">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row hangup-section-start hangup-section row-confirm">
                    <div class="col">
                        <p>{{ "Are you sure you want to close this session?" | xlt }}</p>
                        <div class="row">
                            <div class="col d-flex justify-content-between">
                                <input type="button" class="btn btn-secondary btn-telehealth-confirm-cancel" value="{{ "Cancel" | xla }}" id="hangup-cancel"/>
                                <input type="button" class="btn btn-primary btn-telehealth-confirm-yes" value="{{ "Confirm" | xla }}"/>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row hangup-section row-update-status d-none">
                    <div class="col">
                        <h5 class="text-center">{{ "Update appointment status" | xlt }}</h5>
                        <div class="row mt-3">
                            <div class="col d-flex justify-content-between">
                                <input type="button" class="btn btn-secondary btn-telehealth-session-close" data-status="CloseWithoutUpdating" value="{{ "Close Without Updating" |xla }}" />
                                <input type="button" class="btn btn-secondary btn-telehealth-session-close" data-status="?" value="{{ "No Show" | xla }}" />
                                <input type="button" class="btn btn-success btn-telehealth-session-close" data-status=">" value="{{ "Checked Out" | xla }}" />
                            </div>
                        </div>
                        <div class="row mt-5 mb-3">
                            <div class="col d-flex justify-content-between">
                                <select class="appointment-status-update w-75">
                                    {% for status in statuses %}
                                        <option value="{{ status.option_id|attr }}" {% if appointment.apptstatus == status.option_id %}selected{% endif %}>{{ status.title|text }}</option>
                                    {% endfor %}
                                </select>
                                <input type="button" class="btn btn-primary btn-telehealth-session-select-update" value="{{ "Set Status" |xla }}" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="telehealth-container-configure-session" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog mw-50 ml-auto mr-auto">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ "Configure Session" | xlt }}</h5>
                <button type="button" class="close btn-telehealth-confirm-cancel" aria-label="{{ "Close" | xla }}">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col">
                        <label>
                            <input type="checkbox" value="1" name="enable-participant-invite" />
                            {{ "Allow patient to invite a third party to the session"|xlt }}
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <input type="button" class="btn btn-primary btn-telehealth-session-update" value="{{ "Save Settings" |xla }}" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="telehealth-container-invite-patient" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog mw-50 ml-auto mr-auto">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ "Invite Third Party Related Person" | xlt }}</h5>
                <button type="button" class="close btn-telehealth-confirm-cancel" aria-label="{{ "Close" | xla }}">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row screen primary-screen">
                    <div class="col-12 mb-3 third-party-patient-row {% if thirdPartyPatient %}d-none{% endif %}">
                        <div class="card">
                            {% include "comlink/conference-room-patient-thirdparty.html.twig" with {patient: thirdPartyPatient} %}
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <div class="row">
                                    <div class="col">
                                        {{ "Change Third Party Invitation"|xlt }}
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="col-12 text-center">
                                    <input type="button" class="btn btn-primary btn-show-search-patient-screen mr-5" value="{{ "Add Existing Patient" |xla }}" />
                                    <input type="button" class="btn btn-primary btn-show-new-patient-screen" value="{{ "Invite New Patient" |xla }}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mt-5 mb-5 text-center no-third-party-patient-row {% if not thirdPartyPatient %}d-none{% endif %}">
                        <input type="button" class="btn btn-primary btn-show-search-patient-screen mr-5" value="{{ "Add Existing Patient" |xla }}" />
                        <input type="button" class="btn btn-primary btn-show-new-patient-screen" value="{{ "Invite New Patient" |xla }}" />
                    </div>
                </div>
                <div class="row d-none screen secondary-screen create-patient">
                    <div class="col">
                        <input type="text" class="form-control m-2" name="fname" placeholder="{{ "First Name"|xlt }}" />
                        <input type="text" class="form-control m-2" name="lname" placeholder="{{ "Last Name"|xlt }}" />
                        <input type="text" class="form-control m-2" name="DOB" placeholder="{{ "Date of Birth YYYY-MM-DD"|xlt }}" />
                        <input type="text" class="form-control m-2" name="email" placeholder="{{ "Email Address"|xlt }}" />
                        <p>{{ "Confirm that this individual has provided permission to receive electronic communications via email"|xlt }}</p>
                        <input type="button" class="btn btn-secondary btn-cancel-screen-action" value="{{ "Cancel" |xla }}" />
                        <input type="button" class="btn btn-primary btn-create-patient" value="{{ "Create Patient" |xla }}" />
                    </div>
                </div>
                <div class="row d-none screen secondary-screen search-patient mt-3">
                    <div class="col-12">
                        <input type="text" class="form-control m-2" name="pid" placeholder="{{ "External ID"|xlt }}" />
                        <p class="m-2">{{ "Or"|xlt }}</p>
                        <input type="text" class="form-control m-2" name="fname" placeholder="{{ "First Name"|xlt }}" />
                        <input type="text" class="form-control m-2" name="lname" placeholder="{{ "Last Name"|xlt }}" />
                        <input type="text" class="form-control m-2" name="DOB" placeholder="{{ "Date of Birth YYYY-MM-DD"|xlt }}" />
                        <input type="text" class="form-control m-2" name="email" placeholder="{{ "Email Address"|xlt }} ({{ "Exact Match" }})" />
                        <input type="button" class="btn btn-secondary btn-cancel-screen-action" value="{{ "Cancel" |xla }}" />
                        <input type="button" class="btn btn-primary btn-invite-search" value="{{ "Search Patients" |xla }}" />
                        <ul class="search-patient-list list-group d-none mt-3">
                            <li class="d-none duplicate-match-row-template list-group-item list-group-item-action flex-column align-items-start">
                                <div class="d-flex w-100 justify-content-between">
                                    <h1><i class="fa fa-user"></i></h1>
                                    <h5 class="mb-1">
                                        <span class="fname"></span> <span class="lname"></span>
                                    </h5>
                                    <small>(<span class="pid"></span>)</small>
                                </div>
                                <p><span class="dob"></span> <span class="email"></span></p>
                                <input type="button" class='btn btn-secondary btn-select-patient' value="{{ "Invite Patient" }}" />
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="row alert alert-template d-none">
                    {# alert content will go here #}
                </div>
            </div>
        </div>
    </div>
</div>